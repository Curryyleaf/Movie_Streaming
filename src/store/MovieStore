// /src/stores/moviesStore.js
import { defineStore } from 'pinia';
import axios from 'axios';

export const useMoviesStore = defineStore("movies", {
  state: () => ({
    movies: [],
    popularCeleb:[] ,
    selectedMovie: null,
    loading: false,
  }),
  getters: {
    // allMovies: (state) => state.movies,
    // hasMovies: (state) => state.movies.length > 0,
  },
  actions: {
    async fetchMovies() {
      this.loading = true;
      try {
        const response = await fetch("https://api.themoviedb.org/3");

        this.movies = response;
        console.log("response", response);
      } catch (error) {
        console.error("Failed to fetch movies:", error);
      } finally {
        this.loading = false;
      }
    },
    async fetchPopularCeleb() {
      const response = await axios.get(
        "https://api.themoviedb.org/3/person/popular",
        {
          headers: {
            accept: "application/json",
            Authorization:import.meta.env.VITE_API_ACCESS_TOKEN,
          },
        }
      );
      this.popularCeleb = response.data.results;
      console.log("celebrities", this.popularCeleb);
    },
    selectMovie(movie) {
      this.selectedMovie = movie;
    },
  },
});
